<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pamytka - Bobr Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #0f0f0f;
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            user-select: none;
        }
        .container {
            width: 100%;
            max-width: 400px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .header {
            background: linear-gradient(145deg, #2c2c2c, #1a1a1a);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            border: 1px solid #444;
        }
        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #e67e22;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            border: 3px solid #f1c40f;
        }
        .username { font-size: 20px; font-weight: bold; margin: 5px 0; color: #fff; }
        .role-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #3498db;
            border-radius: 15px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        .balance-card {
            font-size: 36px;
            color: #f1c40f;
            font-weight: 800;
            margin: 15px 0;
            text-shadow: 0 0 15px rgba(241, 196, 15, 0.3);
        }
        .clicker-area {
            position: relative;
            margin: 40px 0;
        }
        .main-button {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: none;
            background: radial-gradient(circle, #e67e22 0%, #d35400 100%);
            font-size: 80px;
            cursor: pointer;
            box-shadow: 0 0 30px rgba(230, 126, 34, 0.4);
            transition: transform 0.05s;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }
        .main-button:active { transform: scale(0.92); }

        .shop-section {
            width: 100%;
            background: #1a1a1a;
            border-radius: 20px;
            padding: 15px;
            margin-top: 20px;
        }
        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #262626;
            margin: 8px 0;
            border-radius: 12px;
            border: 1px solid #333;
        }
        .buy-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
        }
        .buy-btn:active { background: #2ecc71; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <div class="avatar">ü¶´</div>
            <div class="username" id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="role-badge" id="user-role">–ù–æ–≤–∏—á–æ–∫-–≥—Ä—ã–∑—É–Ω</div>
            <div class="balance-card"><span id="coin-count">0</span> BOBR</div>
        </div>

        <div class="clicker-area">
            <button class="main-button" onclick="handleMine()">ü™µ</button>
            <p style="color: #888; margin-top: 15px;">–ù–∞–∂–∏–º–∞–π –Ω–∞ –±—Ä–µ–≤–Ω–æ ‚Äî –ø–æ–ø–æ–ª–Ω–∏ –ü–∞–º—è—Ç–∫—É!</p>
        </div>

        <div class="shop-section">
            <h3 style="margin-top: 0; color: #f1c40f;">–ú–∞–≥–∞–∑–∏–Ω –ü–∞–º—è—Ç–æ–∫</h3>
            <div class="shop-item">
                <span>–†–æ–ª—å: –ú–∞—Å—Ç–µ—Ä</span>
                <button class="buy-btn" onclick="buy('–ú–∞—Å—Ç–µ—Ä –ü–∞–º—è—Ç–æ–∫', 500)">500</button>
            </div>
            <div class="shop-item">
                <span>–†–æ–ª—å: –õ–µ–≥–µ–Ω–¥–∞</span>
                <button class="buy-btn" onclick="buy('–õ–µ–≥–µ–Ω–¥–∞ –ë–æ–±—Ä–æ–≤', 5000)">5000</button>
            </div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.headerColor = '#0f0f0f';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        let coins = parseFloat(localStorage.getItem('kambulyator_coins')) || 0;
        let role = localStorage.getItem('kambulyator_role') || '–ù–æ–≤–∏—á–æ–∫-–≥—Ä—ã–∑—É–Ω';

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        function updateDisplay() {
            document.getElementById('coin-count').innerText = Math.floor(coins);
            document.getElementById('user-role').innerText = role;
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
            } else {
                document.getElementById('user-name').innerText = "–ì–æ—Å—Ç—å";
            }
        }

        function handleMine() {
            coins += 1;
            saveData();
            updateDisplay();
            tg.HapticFeedback.impactOccurred('light');
        }

        function buy(newRole, price) {
            if (coins >= price) {
                coins -= price;
                role = newRole;
                saveData();
                updateDisplay();
                tg.showAlert("–£—Å–ø–µ—à–Ω–æ! –¢–µ–ø–µ—Ä—å —Ç—ã: " + newRole);
            } else {
                tg.showPopup({ message: "–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ bobr-coin!" });
            }
        }

        function saveData() {
            localStorage.setItem('kambulyator_coins', coins);
            localStorage.setItem('kambulyator_role', role);
        }

        updateDisplay();
    </script>
</body>
</html>
